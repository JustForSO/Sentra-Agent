# Sentra Agent - æ™ºèƒ½å¯¹è¯æœºå™¨äººæ¡†æ¶

<div align="center">

[![Node.js](https://img.shields.io/badge/Node.js-â‰¥18.0.0-green.svg)](https://nodejs.org/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/JustForSO/Sentra-Agent/pulls)

**å…¨æ ˆ AI Agent è§£å†³æ–¹æ¡ˆ | å¤šå¹³å°é€‚é… | å·¥å…·å¢å¼º | çŸ¥è¯†å›¾è°± | æ‹ŸäººåŒ–äº¤äº’**

[ç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [æ¶æ„](#ç³»ç»Ÿæ¶æ„) â€¢ [æ–‡æ¡£](#è¯¦ç»†æ–‡æ¡£) â€¢ [è´¡çŒ®](#è´¡çŒ®æŒ‡å—)

</div>

---

## é¡¹ç›®ç®€ä»‹

**Sentra Agent** æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€é«˜åº¦æ¨¡å—åŒ–çš„ AI æ™ºèƒ½å¯¹è¯æœºå™¨äººæ¡†æ¶ï¼Œä¸“ä¸ºæ„å»ºç”Ÿäº§çº§å¯¹è¯ AI åº”ç”¨è€Œè®¾è®¡ã€‚å®ƒæ•´åˆäº†å¤šä¸ªå¼ºå¤§çš„å­ç³»ç»Ÿï¼Œæä¾›ä»æ¶ˆæ¯é€‚é…ã€å·¥å…·è°ƒç”¨ã€çŸ¥è¯†æ£€ç´¢åˆ°æ‹ŸäººåŒ–äº¤äº’çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

### è®¾è®¡ç†å¿µ

- **é«˜åº¦æ¨¡å—åŒ–** - æ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹å°è£…ï¼ŒæŒ‰éœ€ç»„åˆä½¿ç”¨
- **å¹³å°æ— å…³** - æ”¯æŒå¤šç§å³æ—¶é€šè®¯å¹³å°ï¼ˆQQã€å¾®ä¿¡ç­‰ï¼‰
- **å·¥å…·å¢å¼º** - å†…ç½® 80+ å·¥å…·ï¼Œæ”¯æŒæ–‡ä»¶å¤„ç†ã€ç½‘ç»œçˆ¬å–ã€æ•°æ®åˆ†æç­‰
- **çŸ¥è¯†é©±åŠ¨** - åŸºäº Neo4j çš„çŸ¥è¯†å›¾è°±å’Œå‘é‡æ•°æ®åº“
- **æ‹ŸäººåŒ–äº¤äº’** - æ™ºèƒ½æ¶ˆæ¯åˆå¹¶ã€è‡ªç„¶å‘é€é—´éš”ã€æƒ…æ„Ÿæ„ŸçŸ¥å›å¤
- **é«˜æ€§èƒ½** - Redis ç¼“å­˜ã€å¹¶å‘æ§åˆ¶ã€æµå¼è¾“å‡º
- **å¯è§‚æµ‹æ€§** - å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿã€æ€§èƒ½ç›‘æ§ã€è°ƒè¯•å·¥å…·

---

## æ ¸å¿ƒç‰¹æ€§

### æ™ºèƒ½äº¤äº’ç³»ç»Ÿ

#### æ‹ŸäººåŒ–å¯¹è¯
- **æ¶ˆæ¯åˆå¹¶ CD** - ç­‰å¾…ç”¨æˆ·å‘å®Œå†å›å¤ï¼ˆé»˜è®¤ 5 ç§’ï¼‰
- **æ™ºèƒ½å›å¤åˆ¤æ–­** - ä½¿ç”¨ OpenAI tools ç¡®ä¿ 100% å‡†ç¡®åˆ¤æ–­
- **å¹¶å‘æ§åˆ¶** - ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªå¯¹è¯ï¼Œæ›´æ‹Ÿäºº
- **å‘é€é—´éš”** - æ¨¡æ‹ŸçœŸäººæ‰“å­—é€Ÿåº¦å’Œæ€è€ƒæ—¶é—´
- **å›å¤ç­–ç•¥** - æ™ºèƒ½å†³å®šæ˜¯å¦ä½¿ç”¨å›å¤åŠŸèƒ½
- **å¤±è´¥ä¼˜é›…è·³è¿‡** - AI ç”Ÿæˆå¤±è´¥æ—¶è‡ªç„¶è·³è¿‡ï¼Œä¸å¡ä½

#### ä¸Šä¸‹æ–‡ç®¡ç†
- **å…¨å±€å†å²è®°å½•** - æ¯ä¸ªä¼šè¯ä¿ç•™æœ€è¿‘ 100 æ¡å¯¹è¯
- **å·¥å…·ä»»åŠ¡å†å²** - è®°å½•è¿‘æœŸå·¥å…·è°ƒç”¨æ€»ç»“ï¼ˆæœ€è¿‘ 15 æ¡ï¼‰
- **æ¶ˆæ¯é˜Ÿåˆ—** - æ™ºèƒ½ç´¯ç§¯å’Œå¤„ç†æœªå›å¤æ¶ˆæ¯
- **å¯¹è¯å¼•ç”¨** - è‡ªåŠ¨å¼•ç”¨å’Œå…³è”å†å²æ¶ˆæ¯

#### æ™ºèƒ½åˆ¤æ–­
- **ç‹¬ç«‹åˆ¤æ–­æ¨¡å‹** - ä½¿ç”¨ gpt-4o-mini ç­‰å¿«é€Ÿæ¨¡å‹
- **OpenAI Tools** - 100% è¿”å›ç»“æ„åŒ– JSON
- **å¤šç»´åº¦è¯„ä¼°** - ç½®ä¿¡åº¦ã€ç†ç”±ã€ä¸Šä¸‹æ–‡åˆ†æ
- **æˆæœ¬ä¼˜åŒ–** - åˆ¤æ–­å’Œå›å¤åˆ†ç¦»ï¼ŒèŠ‚çœ 89% æˆæœ¬

### Sentra MCP - å·¥å…·è°ƒç”¨æ¡†æ¶

åŸºäº Model Context Protocol (MCP) çš„å¼ºå¤§å·¥å…·ç³»ç»Ÿï¼Œæ”¯æŒ 80+ å†…ç½®å·¥å…·ã€‚

#### Plan-and-Execute æ¶æ„
```
ç”¨æˆ·è¯·æ±‚ â†’ æ™ºèƒ½è§„åˆ’ â†’ å·¥å…·é€‰æ‹© â†’ å¹¶è¡Œæ‰§è¡Œ â†’ ç»“æœæ±‡æ€» â†’ ç”Ÿæˆå›å¤
```

#### æ ¸å¿ƒèƒ½åŠ›
- **æ™ºèƒ½è§„åˆ’** - è‡ªåŠ¨åˆ†è§£ä»»åŠ¡ä¸ºå¯æ‰§è¡Œæ­¥éª¤
- **å·¥å…·ä¸°å¯Œ** - 80+ å†…ç½®å·¥å…·ï¼Œæ¶µç›–å„ç§åœºæ™¯
- **å¹¶è¡Œæ‰§è¡Œ** - æ”¯æŒå·¥å…·å¹¶å‘è°ƒç”¨ï¼Œæå‡æ•ˆç‡
- **æµå¼è¾“å‡º** - å®æ—¶åé¦ˆæ‰§è¡Œè¿›åº¦å’Œç»“æœ
- **Redis é›†æˆ** - ç¼“å­˜ã€æŒ‡æ ‡ç›‘æ§ã€æ‰§è¡Œå†å²

#### å†…ç½®å·¥å…·åˆ†ç±»

**æ–‡æ¡£å¤„ç†**
- PDFã€Wordã€Excelã€PPT è§£æå’Œç”Ÿæˆ
- Markdownã€CSVã€JSONã€XML è½¬æ¢
- æ–‡æœ¬æå–ã€æ ¼å¼è½¬æ¢ã€å†…å®¹åˆ†æ

**ç½‘ç»œå·¥å…·**
- ç½‘é¡µçˆ¬å–ï¼ˆPuppeteer + Readabilityï¼‰
- API è°ƒç”¨ï¼ˆGETã€POSTã€GraphQLï¼‰
- æœç´¢å¼•æ“é›†æˆ
- RSS è®¢é˜…è§£æ

**æ•°æ®æ“ä½œ**
- Redis è¯»å†™æ“ä½œ
- Neo4j å›¾æ•°æ®åº“æŸ¥è¯¢
- SQL æ•°æ®åº“æ“ä½œ
- å‘é‡æ•°æ®åº“æ£€ç´¢

**å¤šåª’ä½“**
- å›¾ç‰‡åˆ†æï¼ˆOCRã€ç‰©ä½“è¯†åˆ«ã€æƒ…æ„Ÿåˆ†æï¼‰
- å›¾ç‰‡ç”Ÿæˆå’Œç¼–è¾‘
- è§†é¢‘ä¿¡æ¯æå–
- éŸ³é¢‘å¤„ç†

**æ—¶é—´å’Œæ—¥æœŸ**
- è‡ªç„¶è¯­è¨€æ—¶é—´è§£æï¼ˆä¸­è‹±æ–‡ï¼‰
- æ—¶åŒºè½¬æ¢
- æ—¥æœŸè®¡ç®—
- å®šæ—¶ä»»åŠ¡ç®¡ç†

**å®ç”¨å·¥å…·**
- ä»£ç æ‰§è¡Œï¼ˆå®‰å…¨æ²™ç®±ï¼‰
- æ•°å­¦è®¡ç®—
- å•ä½è½¬æ¢
- åŠ å¯†è§£å¯†
- æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•

### Sentra RAG - çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ

åŸºäº Neo4j å’Œå‘é‡æ•°æ®åº“çš„å¤šæ¨¡æ€çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿã€‚

#### æ ¸å¿ƒåŠŸèƒ½
- **æ–‡æœ¬çŸ¥è¯†åº“** - å‘é‡åŒ–å­˜å‚¨ï¼Œè¯­ä¹‰æœç´¢
- **å›¾åƒçŸ¥è¯†åº“** - å›¾ç‰‡ç‰¹å¾æå–å’Œç›¸ä¼¼åº¦æ£€ç´¢
- **çŸ¥è¯†å›¾è°±** - Neo4j å­˜å‚¨å®ä½“å…³ç³»
- **æ··åˆæ£€ç´¢** - å‘é‡ + å…³é”®è¯ + å›¾è°±è”åˆæ£€ç´¢
- **æƒ…æ„Ÿåˆ†æ** - å›¾ç‰‡å’Œæ–‡æœ¬æƒ…æ„Ÿè¯†åˆ«

#### æŠ€æœ¯æ ˆ
- **å‘é‡åŒ–**: OpenAI Embeddings (text-embedding-3-small)
- **å›¾æ•°æ®åº“**: Neo4j 5.x
- **ç¼“å­˜**: Redis + NodeCache
- **åˆ†è¯**: Segment (ä¸­æ–‡) + Natural (è‹±æ–‡)

### Sentra Adapter - å¤šå¹³å°é€‚é…å™¨

ç»Ÿä¸€çš„æ¶ˆæ¯é€‚é…å±‚ï¼Œæ”¯æŒå¤šç§å³æ—¶é€šè®¯å¹³å°ã€‚

#### æ”¯æŒå¹³å°
- **QQ**: NapCat é€‚é…å™¨ï¼ˆOneBotV11 åè®®ï¼‰
- **å¾®ä¿¡**: ä¼ä¸šå¾®ä¿¡ã€ä¸ªäººå¾®ä¿¡é€‚é…
- **å…¶ä»–**: å¯æ‰©å±•çš„é€‚é…å™¨æ¥å£

#### é€‚é…å™¨åŠŸèƒ½
- æ¶ˆæ¯æ”¶å‘ç»Ÿä¸€æ¥å£
- æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
- ç¾¤ç»„å’Œå¥½å‹ç®¡ç†
- äº‹ä»¶ç›‘å¬å’Œå¤„ç†
- WebSocket é•¿è¿æ¥

### Sentra Emo - æƒ…æ„Ÿç³»ç»Ÿ

ä¸º AI æ·»åŠ æƒ…æ„Ÿæ„ŸçŸ¥å’Œè¡¨è¾¾èƒ½åŠ›ã€‚

#### åŠŸèƒ½
- **æƒ…æ„Ÿè¯†åˆ«** - è¯†åˆ«æ–‡æœ¬å’Œå›¾ç‰‡ä¸­çš„æƒ…æ„Ÿ
- **æƒ…æ„Ÿè¡¨è¾¾** - æ ¹æ®æƒ…æ„Ÿé€‰æ‹©åˆé€‚çš„å›å¤é£æ ¼
- **æƒ…æ„Ÿåˆ†æ** - å¤šç»´åº¦æƒ…æ„Ÿè¯„åˆ†
- **è¡¨æƒ…æ¨è** - æ™ºèƒ½æ¨èåˆé€‚çš„è¡¨æƒ…ç¬¦å·

### Sentra Prompts - æç¤ºè¯ç®¡ç†

é›†ä¸­åŒ–çš„æç¤ºè¯æ¨¡æ¿ç®¡ç†ç³»ç»Ÿã€‚

#### ç‰¹æ€§
- **æ¨¡æ¿åº“** - é¢„è®¾å„ç§åœºæ™¯çš„æç¤ºè¯
- **å˜é‡æ›¿æ¢** - åŠ¨æ€å‚æ•°æ³¨å…¥
- **é˜¶æ®µæç¤ºè¯** - ä¸ºä¸åŒæ‰§è¡Œé˜¶æ®µå®šåˆ¶æç¤º
- **A/B æµ‹è¯•** - æç¤ºè¯æ•ˆæœå¯¹æ¯”

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

#### å¿…éœ€æœåŠ¡
- **Node.js** â‰¥ 18.0.0
- **Redis** â‰¥ 6.0ï¼ˆæ¨è 7.xï¼‰
- **Neo4j** â‰¥ 5.0ï¼ˆç”¨äºçŸ¥è¯†å›¾è°±ï¼‰

#### å¯é€‰æœåŠ¡
- **Docker** - ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²
- **PM2** - ç”¨äºè¿›ç¨‹ç®¡ç†

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/JustForSO/Sentra-Agent.git
cd sentra-agent
```

#### 2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…ä¸»é¡¹ç›®ä¾èµ–
npm install

# å®‰è£…å­æ¨¡å—ä¾èµ–
cd sentra-mcp && npm install && cd ..
cd sentra-rag && npm install && cd ..
```

#### 3. å¯åŠ¨ Redis
```bash
# ä½¿ç”¨ Docker
docker run -d --name redis -p 6379:6379 redis:7-alpine

# æˆ–ä½¿ç”¨æœ¬åœ°å®‰è£…
redis-server
```

#### 4. å¯åŠ¨ Neo4j
```bash
# ä½¿ç”¨ Docker
docker run -d \
  --name neo4j \
  -p 7474:7474 \
  -p 7687:7687 \
  -e NEO4J_AUTH=neo4j/your_password \
  neo4j:5-community

# è®¿é—® http://localhost:7474 ç¡®è®¤å¯åŠ¨æˆåŠŸ
```

#### 5. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¤ºä¾‹é…ç½®ï¼š
```bash
cp .env.example .env
cp test/.env.example test/.env
```

ç¼–è¾‘ `test/.env`:
```env
# ==================== API é…ç½® ====================
API_BASE_URL=https://api.openai.com/v1
API_KEY=your-openai-api-key

# å›å¤æ¨¡å‹ï¼ˆä¸»è¦æ¨¡å‹ï¼‰
MODEL_NAME=gpt-4o
# åˆ¤æ–­æ¨¡å‹ï¼ˆä¾¿å®œå¿«é€Ÿï¼‰
JUDGE_MODEL=gpt-4o-mini

# ==================== WebSocket é…ç½® ====================
WS_URL=ws://localhost:6702

# ==================== Redis é…ç½® ====================
REDIS_HOST=localhost
REDIS_PORT=6379

# ==================== Neo4j é…ç½® ====================
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_password

# ==================== æœºå™¨äººé…ç½® ====================
BOT_NAME=å¤±è¯­
BOT_ALIASES=å¤±è¯­ç—‡,å°å¤±è¯­

# ==================== æ‹ŸäººåŒ–é…ç½® ====================
ENABLE_MESSAGE_MERGE=true
MESSAGE_MERGE_DELAY=5000
REPLY_CONCURRENCY=1
REPLY_COOLDOWN=2000
```

#### 6. å¯åŠ¨ NapCatï¼ˆQQ é€‚é…å™¨ï¼‰

å‚è€ƒ [sentra-adapter/napcat](./sentra-adapter/napcat) æ–‡æ¡£é…ç½® NapCatã€‚

#### 7. è¿è¡Œæµ‹è¯•
```bash
npm test
```

---

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Sentra Agent æ¡†æ¶                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ Adapter â”‚         â”‚   MCP   â”‚        â”‚   RAG   â”‚
   â”‚  é€‚é…å±‚  â”‚         â”‚ å·¥å…·ç³»ç»Ÿ â”‚        â”‚ çŸ¥è¯†æ£€ç´¢ â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
  â”‚ QQ/å¾®ä¿¡ç­‰  â”‚       â”‚ 80+ Tools â”‚      â”‚  Neo4j +  â”‚
  â”‚  å¹³å°æ¶ˆæ¯  â”‚       â”‚ Redisé›†æˆ â”‚      â”‚  Vectors  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  æ™ºèƒ½å¯¹è¯å¼•æ“    â”‚
                   â”‚ â€¢ æ¶ˆæ¯åˆå¹¶       â”‚
                   â”‚ â€¢ å¹¶å‘æ§åˆ¶       â”‚
                   â”‚ â€¢ å†å²ç®¡ç†       â”‚
                   â”‚ â€¢ æ™ºèƒ½åˆ¤æ–­       â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

```
1. æ¥æ”¶æ¶ˆæ¯
   â†“
2. Adapter è§£æ â†’ æ ‡å‡†åŒ–æ ¼å¼
   â†“
3. æ¶ˆæ¯åˆå¹¶ â†’ ç­‰å¾…ç”¨æˆ·å‘å®Œï¼ˆ5ç§’ CDï¼‰
   â†“
4. æ™ºèƒ½åˆ¤æ–­ â†’ æ˜¯å¦éœ€è¦å›å¤ï¼Ÿ
   â†“ éœ€è¦
5. è®°å½•å†å² â†’ å…¨å±€å†å² + å·¥å…·å†å²
   â†“
6. æ„å»ºä¸Šä¸‹æ–‡ â†’ System + å†å² + å½“å‰æ¶ˆæ¯
   â†“
7. MCP è§„åˆ’ â†’ åˆ†è§£ä»»åŠ¡ â†’ é€‰æ‹©å·¥å…·
   â†“
8. RAG æ£€ç´¢ â†’ ç›¸å…³çŸ¥è¯†ï¼ˆå¦‚éœ€è¦ï¼‰
   â†“
9. å·¥å…·æ‰§è¡Œ â†’ å¹¶è¡Œè°ƒç”¨ â†’ è·å–ç»“æœ
   â†“
10. ç”Ÿæˆå›å¤ â†’ AI ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ
   â†“
11. æ‹Ÿäººå‘é€ â†’ åˆ†æ®µ + é—´éš” + å›å¤ç­–ç•¥
   â†“
12. è®°å½•åé¦ˆ â†’ å·¥å…·æ€»ç»“ + å¯¹è¯å†å²
```

---

## æ€§èƒ½ä¼˜åŒ–

### æˆæœ¬ä¼˜åŒ–

#### æ™ºèƒ½åˆ¤æ–­æ¨¡å‹åˆ†ç¦»
```
ä¼ ç»Ÿæ¨¡å¼ï¼ˆä¸åˆ¤æ–­ï¼‰:
  100 æ¡ç¾¤èŠæ¶ˆæ¯ Ã— gpt-4o = $0.625/å¤©

æ™ºèƒ½åˆ¤æ–­æ¨¡å¼:
  åˆ¤æ–­: 100 Ã— gpt-4o-mini = $0.0075
  å›å¤: 10 Ã— gpt-4o = $0.0625
  æ€»è®¡: $0.07/å¤©
  
èŠ‚çœ: 89% æˆæœ¬ï¼
```

#### Redis ç¼“å­˜
- å·¥å…·æ‰§è¡Œç»“æœç¼“å­˜
- å‘é‡æ£€ç´¢ç¼“å­˜
- çŸ¥è¯†å›¾è°±æŸ¥è¯¢ç¼“å­˜

#### å¹¶å‘æ§åˆ¶
- ä¸€æ¬¡å¤„ç†ä¸€ä¸ªå¯¹è¯
- é¿å…è¿‡åº¦å¹¶å‘
- é™ä½ API è°ƒç”¨é¢‘ç‡

### å“åº”ä¼˜åŒ–

- **æµå¼è¾“å‡º** - å®æ—¶åé¦ˆæ‰§è¡Œè¿›åº¦
- **å·¥å…·å¹¶è¡Œ** - å¤šä¸ªå·¥å…·åŒæ—¶æ‰§è¡Œ
- **é¢„åŠ è½½** - å¸¸ç”¨æ•°æ®æå‰åŠ è½½
- **æ‡’åŠ è½½** - æŒ‰éœ€åŠ è½½å¤§å‹æ¨¡å—

---

## é¡¹ç›®ç»“æ„

```
sentra-agent/
â”œâ”€â”€ agent.js                    # æ ¸å¿ƒ Agent ç±»
â”œâ”€â”€ package.json                # ä¸»é¡¹ç›®é…ç½®
â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡
â”‚
â”œâ”€â”€ test/                       # æµ‹è¯•å’Œä¸»è¦è¿è¡Œç¯å¢ƒ
â”‚   â”œâ”€â”€ smart-agent-test.js    # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ .env                    # ç‹¬ç«‹é…ç½®
â”‚   â”œâ”€â”€ .env.example            # é…ç½®æ¨¡æ¿
â”‚   â”œâ”€â”€ 1.txt                   # System Prompt
â”‚   â”œâ”€â”€ README.md               # æµ‹è¯•æ–‡æ¡£
â”‚   â””â”€â”€ *.md                    # å„åŠŸèƒ½æ–‡æ¡£
â”‚
â”œâ”€â”€ sentra-mcp/                 # ğŸ› ï¸ MCP å·¥å…·æ¡†æ¶
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ sdk/                # SDK æ¥å£
â”‚   â”‚   â”œâ”€â”€ mcp/                # MCP æœåŠ¡å™¨/å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ tools/              # 80+ å†…ç½®å·¥å…·
â”‚   â”‚   â””â”€â”€ redis/              # Redis é›†æˆ
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ sentra-rag/                 # ğŸ§  çŸ¥è¯†æ£€ç´¢ç³»ç»Ÿ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ sdk/                # RAG SDK
â”‚   â”‚   â”œâ”€â”€ services/           # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ embedding.js   # å‘é‡åŒ–
â”‚   â”‚   â”‚   â”œâ”€â”€ neo4j.js       # å›¾æ•°æ®åº“
â”‚   â”‚   â”‚   â””â”€â”€ vector.js      # å‘é‡æ£€ç´¢
â”‚   â”‚   â””â”€â”€ storage/            # æ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ sentra-adapter/             # ğŸ”Œ å¹³å°é€‚é…å™¨
â”‚   â”œâ”€â”€ napcat/                 # QQ é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ config.json         # NapCat é…ç½®
â”‚   â”‚   â””â”€â”€ README.md           # ä½¿ç”¨æ–‡æ¡£
â”‚   â”œâ”€â”€ wechat/                 # å¾®ä¿¡é€‚é…å™¨
â”‚   â””â”€â”€ llonebot/               # LLOneBot é€‚é…å™¨
â”‚
â”œâ”€â”€ sentra-emo/                 # ğŸ­ æƒ…æ„Ÿç³»ç»Ÿ
â”‚   â”œâ”€â”€ emotion-detector.js     # æƒ…æ„Ÿè¯†åˆ«
â”‚   â””â”€â”€ emotion-expresser.js    # æƒ…æ„Ÿè¡¨è¾¾
â”‚
â”œâ”€â”€ sentra-prompts/             # ğŸ“ æç¤ºè¯ç®¡ç†
â”‚   â”œâ”€â”€ templates/              # æç¤ºè¯æ¨¡æ¿
â”‚   â””â”€â”€ manager.js              # æ¨¡æ¿ç®¡ç†å™¨
â”‚
â”œâ”€â”€ src/                        # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ config.js               # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ agent.js                # Agent å®ç°
â”‚   â”œâ”€â”€ token-counter.js        # Token è®¡ç®—
â”‚   â””â”€â”€ utils.js                # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ examples/                   # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ basic-chat.js           # åŸºç¡€å¯¹è¯
â”‚   â”œâ”€â”€ tool-usage.js           # å·¥å…·ä½¿ç”¨
â”‚   â””â”€â”€ rag-search.js           # çŸ¥è¯†æ£€ç´¢
â”‚
â””â”€â”€ docs/                       # æ–‡æ¡£
    â”œâ”€â”€ API.md                  # API æ–‡æ¡£
    â”œâ”€â”€ TOOLS.md                # å·¥å…·åˆ—è¡¨
    â””â”€â”€ DEPLOYMENT.md           # éƒ¨ç½²æŒ‡å—
```

---

## è¯¦ç»†æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£
- [å¿«é€Ÿå…¥é—¨](./test/QUICKSTART.md) - 5 åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
- [å®Œæ•´åŠŸèƒ½è¯´æ˜](./test/README.md) - æ‰€æœ‰åŠŸèƒ½è¯¦è§£
- [é…ç½®æŒ‡å—](./test/.env.example) - ç¯å¢ƒå˜é‡è¯´æ˜

### åŠŸèƒ½æ–‡æ¡£
- [æ¶ˆæ¯åˆå¹¶ä¸å†å²è®°å½•](./test/MESSAGE_MERGE_HISTORY.md)
- [æ™ºèƒ½åˆ¤æ–­æ¨¡å‹](./test/JUDGE_MODEL.md)
- [å›å¤é˜Ÿåˆ—å¹¶å‘æ§åˆ¶](./test/CONCURRENCY_CONTROL.md)

### å­æ¨¡å—æ–‡æ¡£
- [Sentra MCP æ–‡æ¡£](./sentra-mcp/README.md)
- [Sentra RAG æ–‡æ¡£](./sentra-rag/README.md)
- [NapCat é€‚é…å™¨](./sentra-adapter/napcat/README.md)

---

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

åœ¨ `sentra-mcp/src/tools/` åˆ›å»ºæ–°å·¥å…·ï¼š

```javascript
export default {
  name: 'my_custom_tool',
  description: 'å·¥å…·æè¿°',
  inputSchema: {
    type: 'object',
    properties: {
      param1: { type: 'string', description: 'å‚æ•°1' }
    },
    required: ['param1']
  },
  async execute(args) {
    // å·¥å…·é€»è¾‘
    return { result: 'success' };
  }
};
```

### è‡ªå®šä¹‰é€‚é…å™¨

å®ç°æ ‡å‡†é€‚é…å™¨æ¥å£ï¼š

```javascript
class CustomAdapter {
  async connect() { /* è¿æ¥é€»è¾‘ */ }
  async sendMessage(msg) { /* å‘é€æ¶ˆæ¯ */ }
  async onMessage(callback) { /* æ¥æ”¶æ¶ˆæ¯ */ }
}
```

### æ‰©å±•çŸ¥è¯†åº“

æ·»åŠ è‡ªå®šä¹‰çŸ¥è¯†æºï¼š

```javascript
import SentraRAG from 'sentra-rag';

const rag = new SentraRAG();
await rag.init();

// æ·»åŠ æ–‡æœ¬çŸ¥è¯†
await rag.addText('çŸ¥è¯†å†…å®¹', { source: 'custom' });

// æ·»åŠ å›¾ç‰‡çŸ¥è¯†
await rag.addImage('/path/to/image.jpg', { tag: 'product' });
```

---

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### Redis è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ Redis æ˜¯å¦è¿è¡Œ
redis-cli ping

# åº”è¯¥è¿”å› PONG
```

#### Neo4j è¿æ¥å¤±è´¥
```bash
# è®¿é—® Neo4j æµè§ˆå™¨
# http://localhost:7474

# æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
```

#### WebSocket è¿æ¥å¤±è´¥
```bash
# ç¡®è®¤ NapCat å·²å¯åŠ¨
# æ£€æŸ¥ç«¯å£ 6702 æ˜¯å¦è¢«å ç”¨
netstat -ano | findstr 6702
```

#### æ¨¡å‹è°ƒç”¨å¤±è´¥
- æ£€æŸ¥ API_KEY æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ç½‘ç»œå¯ä»¥è®¿é—® OpenAI API
- æŸ¥çœ‹ API é¢åº¦æ˜¯å¦å……è¶³

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```env
# test/.env
TEST_MODE=true
LOG_LEVEL=debug
```

---

## ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—æ–‡ä»¶
```
logs/
â”œâ”€â”€ app.log          # åº”ç”¨æ—¥å¿—
â”œâ”€â”€ error.log        # é”™è¯¯æ—¥å¿—
â”œâ”€â”€ tool.log         # å·¥å…·è°ƒç”¨æ—¥å¿—
â””â”€â”€ performance.log  # æ€§èƒ½æ—¥å¿—
```

### Redis ç›‘æ§

æŸ¥çœ‹æ‰§è¡Œç»Ÿè®¡ï¼š
```bash
redis-cli
> KEYS sentra:exec:*
> GET sentra:exec:stats
```

æŸ¥çœ‹ç¼“å­˜ï¼š
```bash
> KEYS sentra:cache:*
> TTL sentra:cache:some_key
```

---

## éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

#### 1. æ„å»ºé•œåƒ
```bash
docker build -t sentra-agent .
```

#### 2. ä½¿ç”¨ Docker Compose
```yaml
version: '3.8'
services:
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
  
  neo4j:
    image: neo4j:5-community
    ports:
      - "7474:7474"
      - "7687:7687"
    environment:
      - NEO4J_AUTH=neo4j/password
  
  sentra-agent:
    build: .
    depends_on:
      - redis
      - neo4j
    environment:
      - REDIS_HOST=redis
      - NEO4J_URI=bolt://neo4j:7687
    volumes:
      - ./test/.env:/app/test/.env
```

#### 3. å¯åŠ¨
```bash
docker-compose up -d
```

### PM2 éƒ¨ç½²

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start test/smart-agent-test.js --name sentra-agent

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs sentra-agent

# é‡å¯
pm2 restart sentra-agent
```

---

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### è´¡çŒ®ç±»å‹

- **Bug ä¿®å¤** - ä¿®å¤å·²çŸ¥é—®é¢˜
- **æ–°åŠŸèƒ½** - æ·»åŠ æ–°ç‰¹æ€§
- **æ–‡æ¡£** - æ”¹è¿›æ–‡æ¡£
- **ä»£ç ä¼˜åŒ–** - é‡æ„å’Œæ€§èƒ½ä¼˜åŒ–
- **æµ‹è¯•** - æ·»åŠ æµ‹è¯•ç”¨ä¾‹
- **å·¥å…·** - æ–°å¢å·¥å…·æˆ–æ”¹è¿›ç°æœ‰å·¥å…·

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

## è‡´è°¢

### æ ¸å¿ƒä¾èµ–
- [LangChain](https://js.langchain.com/) - LLM åº”ç”¨æ¡†æ¶
- [OpenAI](https://openai.com/) - å¤§è¯­è¨€æ¨¡å‹
- [Neo4j](https://neo4j.com/) - å›¾æ•°æ®åº“
- [Redis](https://redis.io/) - ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—
- [NapCat](https://github.com/NapNeko/NapCatQQ) - QQ åè®®å®ç°

### ç‰¹åˆ«æ„Ÿè°¢
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„æ”¯æŒ
- å¼€æºç¤¾åŒºçš„æ— ç§åˆ†äº«

---

## è”ç³»æˆ‘ä»¬

- **Issues**: [GitHub Issues](https://github.com/JustForSO/Sentra-Agent/issues)
- **Discussions**: [GitHub Discussions](https://github.com/JustForSO/Sentra-Agent/discussions)
- **Email**: support@sentra.ai

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

Made with â¤ï¸ by Sentra Team

</div>
